import{j as Y}from"./jsx-runtime.7faW4zRM.js";import{r as i}from"./index.DhYZZe0J.js";function B(){const[f,d]=i.useState({x:0,y:0});return i.useEffect(()=>{const h=m=>{d({x:m.clientX,y:m.clientY})};return window.addEventListener("mousemove",h),()=>{window.removeEventListener("mousemove",h)}},[]),f}function H(f){f=f.replace("#","");const d=parseInt(f,16),h=d>>16&255,m=d>>8&255,v=d&255;return[h,m,v]}const W=({className:f="",quantity:d=100,staticity:h=50,ease:m=50,size:v=.4,refresh:b=!1,color:R="#ffffff",vx:j=0,vy:A=0})=>{const c=i.useRef(null),x=i.useRef(null),r=i.useRef(null),w=i.useRef([]),g=B(),y=i.useRef({x:0,y:0}),e=i.useRef({w:0,h:0}),l=typeof window<"u"?window.devicePixelRatio:1;i.useEffect(()=>(c.current&&(r.current=c.current.getContext("2d")),M(),X(),window.addEventListener("resize",M),()=>{window.removeEventListener("resize",M)}),[R]),i.useEffect(()=>{F()},[g.x,g.y]),i.useEffect(()=>{M()},[b]);const M=()=>{L(),$()},F=()=>{if(c.current){const t=c.current.getBoundingClientRect(),{w:n,h:s}=e.current,o=g.x-t.left-n/2,a=g.y-t.top-s/2;o<n/2&&o>-n/2&&a<s/2&&a>-s/2&&(y.current.x=o,y.current.y=a)}},L=()=>{x.current&&c.current&&r.current&&(w.current.length=0,e.current.w=x.current.offsetWidth,e.current.h=x.current.offsetHeight,c.current.width=e.current.w*l,c.current.height=e.current.h*l,c.current.style.width=`${e.current.w}px`,c.current.style.height=`${e.current.h}px`,r.current.scale(l,l))},C=()=>{const t=Math.floor(Math.random()*e.current.w),n=Math.floor(Math.random()*e.current.h),s=0,o=0,a=Math.floor(Math.random()*2)+v,u=0,p=parseFloat((Math.random()*.6+.1).toFixed(1)),E=(Math.random()-.5)*.1,T=(Math.random()-.5)*.1,q=.1+Math.random()*4;return{x:t,y:n,translateX:s,translateY:o,size:a,alpha:u,targetAlpha:p,dx:E,dy:T,magnetism:q}},S=H(R),z=(t,n=!1)=>{if(r.current){const{x:s,y:o,translateX:a,translateY:u,size:p,alpha:E}=t;r.current.translate(a,u),r.current.beginPath(),r.current.arc(s,o,p,0,2*Math.PI),r.current.fillStyle=`rgba(${S.join(", ")}, ${E})`,r.current.fill(),r.current.setTransform(l,0,0,l,0,0),n||w.current.push(t)}},P=()=>{r.current&&r.current.clearRect(0,0,e.current.w,e.current.h)},$=()=>{P();const t=d;for(let n=0;n<t;n++){const s=C();z(s)}},I=(t,n,s,o,a)=>{const u=(t-n)*(a-o)/(s-n)+o;return u>0?u:0},X=()=>{P(),w.current.forEach((t,n)=>{const o=[t.x+t.translateX-t.size,e.current.w-t.x-t.translateX-t.size,t.y+t.translateY-t.size,e.current.h-t.y-t.translateY-t.size].reduce((u,p)=>Math.min(u,p)),a=parseFloat(I(o,0,20,0,1).toFixed(2));if(a>1?(t.alpha+=.02,t.alpha>t.targetAlpha&&(t.alpha=t.targetAlpha)):t.alpha=t.targetAlpha*a,t.x+=t.dx+j,t.y+=t.dy+A,t.translateX+=(y.current.x/(h/t.magnetism)-t.translateX)/m,t.translateY+=(y.current.y/(h/t.magnetism)-t.translateY)/m,z(t,!0),t.x<-t.size||t.x>e.current.w+t.size||t.y<-t.size||t.y>e.current.h+t.size){w.current.splice(n,1);const u=C();z(u)}}),window.requestAnimationFrame(X)};return Y.jsx("div",{className:f,ref:x,"aria-hidden":"true",children:Y.jsx("canvas",{ref:c,className:"h-full w-full"})})};export{W as Particles};
